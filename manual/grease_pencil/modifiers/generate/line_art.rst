.. index:: Grease Pencil Modifiers; Line Art Modifier
.. _bpy.types.LineartGpencilModifier:

*****************
Line Art Modifier
*****************

The *Line Art* modifier generates stylized line art from the scene or selected source collection or objects.

.. note::

   Due to lack of global cache at the moment, each Line Art modifier will run the entire
   occlusion calculation for itself. So if you have multiple line art modifiers to select
   different parts of the scene (to apply different styles, etc.), the evaluation will take much longer.
   There are plans to remedy this in the future, but this is a known limitation for now.


Options
=======

.. figure:: /images/grease-pencil_modifiers_generate_line-art_panel.png
   :align: right

   The Line Art modifier.

.. _bpy.types.LineartGpencilModifier.use_cache:

Use Cache
   Optimize rendering by using cached scene data from the first line art modifier in the stack.
   This option has the disadvantage of certain settings becoming unavailable.

   This option only available when you have more than one Line Art modifier
   is the same modifier stack and the modifier is not the first Line Art modifier in the stack.

Source Type
   What type of geometry source should line art be generated from.

   Scene, Collection, Object

Object/Collection
   Based on the source type, collection or object can be selected as source geometry.

   .. _bpy.types.LineartGpencilModifier.use_invert_collection:

   Invert Collection Filtering
      Select everything except lines from specified collection.

.. note::

   Line Art will still load and calculate the entire visible scene to produce correct occlusion result,
   unless specified to do otherwise in object or collection Line Art *Usage* property.

Layer
   The Grease Pencil :ref:`bpy.types.GPencilLayer` to put the result in.

Material
   The Grease Pencil :ref:`bpy.types.MaterialGPencilStyle` to generate strokes with.


Geometry Processing
-------------------

.. _bpy.types.LineartGpencilModifier.source_camera:
.. _bpy.types.LineartGpencilModifier.use_custom_camera:

Custom Camera
   Use custom camera instead of the active camera for calculating strokes.
   Useful when baking multiple shots in different angle as well as for motion graphics effects.

Remove Doubles
   Perform a "merge by distance" operation when loading geometry into Line Art.
   The threshold of this operation is internally set to a value that is optimal for Line Art algorithm precision.

Overlapping Edges as Contour
   This option allows overlapping edges (e.g. from an Edge Split modifier or imported geometry where
   two edges occupy the exact same space) to be drawn as contour. Enabling this option will slow down
   the calculation slightly but it will handle edge overlapping cases without erroneous occlusion results.

Instanced Objects
   This option enables particles and other instanced objects to be loaded for line art calculation.
   There will be performance impact when there are a large amount of instanced objects in the scene.

Clipping Boundaries
   When enabled, line art will generate clipping lines as contour type at the place
   where near or far clipping planes cut the model. Otherwise there will be no lines.

.. _bpy.types.LineartGpencilModifier.use_crease_on_smooth:

Crease on Smooth
   Allow crease edges to show inside smooth surfaces.

.. _bpy.types.LineartGpencilModifier.use_crease_on_sharp:

Crease on Sharp
   Allow creases to show on sharp edges.

.. _bpy.types.LineartGpencilModifier.use_back_face_culling:

Back Face Culling
   Remove all back faces to speed up calculation.
   Note, removing back faces will create edges in different occlusion levels than when disabled.


Edge Types
----------

Line Art can identify different edge types. Selected edge types will be included in the result.

Contour
   Where the edge becomes the separation line of front/backfacing faces.

.. _bpy.types.LineartGpencilModifier.use_loose:

Loose
   Generate strokes for edges that do not form a :term:`Face`.

Material Borders
   Where the edge separates faces with different materials.

Edge Marks
   Freestyle edge marks.

Intersections
   Intersection lines between faces.

Crease
   Where the edge angle is small enough. Controlled by *Crease Threshold* property.

   Crease Threshold
      Edge angles that are smaller than this value will be treated as crease.

.. _bpy.types.LineartGpencilModifier.use_overlap_edge_type_support:

Allow Overlap
   Allow an edge to have multiple overlapping types.
   This will create a separate stroke for each overlapping type.


Style
-----

.. figure:: /images/grease-pencil_modifiers_generate_line-art_style-panel.png
   :align: right

   Style subpanel.

Thickness
   The strokes generated by line art are given this thickness.

Opacity
   The strokes generated by line art are given this Opacity.


Occlusion
---------

.. figure:: /images/grease-pencil_modifiers_generate_line-art_occlusion-panel.png
   :align: right

   Occlusion subpanel.

Range
   If enabled, the modifier will select lines that have an occlusion level between start and end values.

Level
   Desired occlusion level to be selected as line art result. A value of 0 means visible lines (no occlusion).
   A value of 1 means selecting lines that have been occluded by exactly one layer of faces.


Material Mask
^^^^^^^^^^^^^

If enabled, Line Art will only select lines that are occluded by certain faces whose material
have specific occlusion masks set.

Masks
   To select edges that have been occluded by the selected
   :ref:`Material Mask <bpy.types.MaterialLineArt.use_material_mask_bits>`.

Exact Match
   If enabled, only lines that are occluded with the exact mask bit combination will be selected.
   Otherwise, lines that have been occluded by any one of specified material masks will be selected.

.. figure:: /images/grease-pencil_modifiers_generate_line-art_transparency-mask.png
   :align: right

   Demonstration of the usage of material masks.


Intersection
------------

Allows you to select edges that intersect between two collections.

.. _bpy.types.LineartGpencilModifier.use_intersection_mask:

Collection Mask
   Mask bits to match from :ref:`Collection Line Art <bpy.types.Collection.lineart_intersection_mask>` properties.

.. _bpy.types.LineartGpencilModifier.use_intersection_match:

Exact Match
   Require matching all intersection masks instead of just one.

.. figure:: /images/grease-pencil_modifiers_generate_line-art_collection-mask.png

   Demonstration of the usage of collection masks.


.. _bpy.types.LineartGpencilModifier.use_face_mark:

Face Mark Filtering
-------------------

.. figure:: /images/grease-pencil_modifiers_generate_line-art_face-mark-filtering-panel.png

   Face Mark Filtering subpanel.

*Face Mark Filtering* can be used to have manual control over which
feature edges produce strokes by using Freestyle face marks.

.. _bpy.types.LineartGpencilModifier.use_face_mark_invert:

Invert
   Invert face mark filtering.

.. _bpy.types.LineartGpencilModifier.use_face_mark_boundaries:

Boundaries
   Filter feature lines based on face mark boundaries.

.. _bpy.types.LineartGpencilModifier.use_face_mark_keep_contour:

Keep Contour
   Preserve contour lines while filtering.

.. figure:: /images/grease-pencil_modifiers_generate_line-art_face-mark-filtering-example.png


Chaining
--------

.. figure:: /images/grease-pencil_modifiers_generate_line-art_chaining-panel.png
   :align: right

   Chaining subpanel.

Chain
   Intersection with Contour
      Allows intersection lines to be chained together with contour lines.

      .. note::

         Enabling this option will lead to ambiguity in intersection edge types.
         Intersection lines that have not been able to chain with any nearby contour lines will remain
         as intersection lines.

   All Lines
      Enabling this option will cause all lines to have the type of contour and to be chained together.

   Loose Edges
      Allow floating Edges that do not form a face to be chained together.

   Loose as Contour
      Edges that do not form a face will be classified as contour lines.

   Preserve Details
      Instead of splitting at each occlusion change, keep small details from the initial chain.
      When details are not kept, will create a much smoother result.

   Geometry Space
      Use geometry distance for chaining instead of image space.

Image Threshold
   Allow the end point of short segments to be chained together if the 2D image space distance
   between them are within the specified threshold.

.. _bpy.types.LineartGpencilModifier.smooth_tolerance:

Smooth Tolerance
   The strength of smoothing applied on jagged chains.

Angle Splitting
   Split a chain at sharp "turning" points specified by this angle.


Vertex Weight Transfer
----------------------

.. figure:: /images/grease-pencil_modifiers_generate_line-art_vertex-weight-panel.png
   :align: right

   Vertex Weight Transfer subpanel.

Filter Source
   If source mesh has vertex groups whose name starts with this text, then the vertex weight info
   will be transferred into weight groups in Grease Pencil strokes.

Match Output
   Transfer the filtered object vertex weights into Grease Pencil weight groups with the same names
   as the filtered ones.

Target
   If *Match Output* is off, then a target vertex group has to be specified.
   If there are multiple weight groups copied into target, then the highest weight value is copied into it.


Composition
-----------

.. figure:: /images/grease-pencil_modifiers_generate_line-art_composition-panel.png

   Composition subpanel.

.. _bpy.types.LineartGpencilModifier.overscan:

Overscan
   To optimize rendering, Blender only renders the strokes for edges of the object that are in the camera's view.
   This optimization however, can result in strokes ending abruptly at the edge of the image.

   This value prevents this error by adding a margin outside the camera's view to continue computing strokes.

.. _bpy.types.LineartGpencilModifier.use_image_boundary_trimming:

Image Boundary Trimming
   Trim all stroke right at the boundary of image (including overscan region).

.. _bpy.types.LineartGpencilModifier.stroke_depth_offset:

Depth Offset
   Move strokes slightly towards the camera to avoid clipping while preserve depth for the viewport.
   This option is unavailable unless :ref:`Show in Front <bpy.types.Object.show_in_front>` is disabled.

.. _bpy.types.LineartGpencilModifier.use_offset_towards_custom_camera:

Towards Custom Camera
   Offset strokes towards selected camera (see *Custom Camera* above) instead of the active camera.


Bake
----

.. figure:: /images/grease-pencil_modifiers_generate_line-art_baking-panel.png
   :align: right

   Bake options.

Bake Line Art
   Bakes Line Art strokes for active Grease Pencil object within the *start*, *end* frame range in scene.
   Bake Line Art (All) bakes all Grease Pencil objects that contains at least one Line Art modifier.
   After baking, baked Line Art modifiers will be deactivated automatically.

Clear Baked Line Art
   Clears baked line art frames within the scene frame range for active Grease Pencil object.
   Clear Baked Line Art (All) applies the same operation for all Grease Pencil objects that
   contains at least one Line Art modifier.

   .. warning::

      If you have drawn anything manually in the frame range of where line art runs,
      this operation will also clear those strokes!

Continue without Clearing
   Re-activate a specific Line Art modifier without clearing baked strokes. This is useful for working
   on multiple portions of frames separately.
